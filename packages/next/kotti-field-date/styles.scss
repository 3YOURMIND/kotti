@import '../kotti-field/mixins.scss';

.kt-field-date,
.kt-field-daterange {
	.kt-field__input-container {
		width: 100%;
		margin: 0;

		&:not(:last-child) {
			margin-bottom: 0.4rem;
		}

		.el-date-editor {
			width: 100%;

			&--date,
			&--daterange {
				display: flex;
				justify-content: space-between;

				i,
				span.el-range-separator {
					display: flex;
					align-items: center;
					justify-content: center;
					line-height: unset;
				}
			}

			&--date .el-input__inner,
			&--daterange .el-range-input {
				flex: 1;
				padding: 0;
				margin: 0;
				line-height: 1.6;
				border: 0;
			}

			&--date {
				.el-input__inner {
					-webkit-order: 2;
					order: 2;
				}

				.el-input__prefix,
				.el-input__suffix {
					display: flex;
					align-items: center;
					font-size: 1.1em;
					color: var(--icon-02);
					cursor: pointer;
				}

				.el-input__prefix {
					-webkit-order: 1;
					order: 1;
				}

				.el-input__suffix {
					-webkit-order: 3;
					order: 3;
				}
			}
		}
	}
}

.el-picker-panel {
	@include el-popper;

	> * a {
		color: var(--link-02);
	}

	&__body-wrapper {
		display: flex;
		flex-direction: column-reverse;
		justify-content: space-between;
		width: 100%;
		height: 100%;
		padding: 1.2rem 0;

		* {
			outline: none;

			&:focus,
			&::-moz-focus-inner {
				outline: none;
			}
		}

		.el-picker-panel {
			&__sidebar {
				display: flex;
				flex: 1;
				flex-wrap: wrap;
				justify-content: flex-start;
				padding: 0 1.2rem;

				> button {
					padding: 0.4rem 0;
					font-size: 0.8rem;
					color: var(--link-02);
					cursor: pointer;
					background-color: transparent;
					border: 0;
					-moz-text-decoration-line: underline;
					-moz-text-decoration-style: solid;
					text-decoration-line: underline;
					text-decoration-style: solid;

					& + button {
						margin-left: 0.8rem;
					}

					&:hover {
						color: var(--link-03);
					}

					&:active {
						color: var(--link-01);
					}
				}
			}

			&__body {
				flex: 1;
				$td-diameter: 1.5rem;
				$icon-size: 1.3rem;
				$double-chevron-translate: 1rem;
				$month-font-size: 1.2rem;
				$label-font-size: 1.1rem;

				.el-date-picker__header,
				.el-date-range-picker__header {
					display: flex;
					justify-content: flex-end;
					// padding: 0.8rem 0;
					padding: 0 1.2rem 0.8rem 1.2rem;
					// margin: 0 1rem;
					font-size: 1.2em;

					text-align: center;

					button.el-picker-panel__icon-btn {
						display: flex;
						align-items: flex-end;
						justify-content: center;
						padding: 0;
						color: var(--icon-02);
						cursor: pointer;
						background: transparent;
						border: 0;

						i {
							font-size: $icon-size;
						}

						&:hover {
							color: var(--interactive-01);
						}
					}

					// styles specific to el-date-picker header
					&:not(.el-date-picker__header--bordered) {
						position: relative;

						button.el-icon-d-arrow-left {
							@supports (clip-path: inset(50% 10% 0% 10%)) {
								clip-path: inset(50% 10% 0% 10%);
							}
						}

						button.el-icon-d-arrow-right {
							@supports (clip-path: inset(50% 10% 0% 10%)) {
								clip-path: inset(50% 10% 0% 10%);
							}
						}

						span.el-date-picker__header-label {
							&:hover {
								color: var(--interactive-01);
							}

							&:first-of-type {
								margin-top: 0.5 * $label-font-size;
								margin-right: auto;

								color: var(--text-02);

								// clips a box shape with radius 0 from the top by 50%
								// transforming the year that's preceded by a line break means that
								// hovering over the year will cover the click area of the month
								// (i.e. the area in which user can click on month is very limited)
								@supports (clip-path: inset(50% 0% 0% 0%)) {
									clip-path: inset(50% 0% 0% 0%);
								}

								// add a line-break before year in the header of the el-date-picker table
								&::before {
									white-space: pre;
									content: '\a';
								}

								&:hover {
									color: var(--interactive-01);
								}
							}

							&:last-of-type {
								position: absolute;
								left: 1.2rem;
							}
						}
					}

					span.el-date-picker__header-label {
						cursor: pointer;

						&:first-of-type {
							-webkit-order: 2;
							order: 2;
							font-size: $label-font-size;
						}

						&:last-of-type {
							display: flex;
							flex: 1;
							-webkit-order: 1;
							order: 1;

							font-size: $month-font-size;
							text-transform: uppercase;
						}
					}

					.el-date-picker {
						&__prev-btn {
							&.el-icon-d-arrow-left {
								-webkit-order: 3;
								order: 3;

								> :last-child {
									margin-right: -$double-chevron-translate;
									transform: translateX(-1 * $double-chevron-translate);
								}
							}

							&.el-icon-arrow-left {
								-webkit-order: 4;
								order: 4;

								@supports (clip-path: inset(50% 10% 0% 10%)) {
									clip-path: inset(50% 10% 0% 10%);
								}
							}
						}

						&__next-btn {
							&.el-icon-arrow-right {
								-webkit-order: 5;
								order: 5;

								@supports (clip-path: inset(50% 10% 0% 10%)) {
									clip-path: inset(50% 10% 0% 10%);
								}
							}

							&.el-icon-d-arrow-right {
								-webkit-order: 6;
								order: 6;

								> :first-child {
									margin-left: -$double-chevron-translate;
									transform: translateX($double-chevron-translate);
								}
							}
						}
					}

					&--bordered {
						justify-content: space-between;
						margin: 0;
						margin-bottom: 0.4rem;
						border-bottom: 1px solid var(--ui-02);

						span.el-date-picker__header-label:not([style*='display: none;']) {
							-webkit-order: 4;
							order: 4;
							margin-right: unset;
						}
					}
				}

				.el-picker-panel__content {
					padding: 0 1.2rem;
					margin: 0;

					// for the range pickers
					&.is-left,
					&.is-right {
						flex: 1;
					}

					&.is-left {
						padding-right: 0.6rem;
						border-right: 1px solid var(--ui-02);
					}

					&.is-right {
						padding-left: 0.6rem;
					}

					table {
						padding: 0.8em;
						margin: 0;
						text-align: center;
						border: 0;

						tbody {
							display: flex;
							flex-direction: column;

							tr {
								display: flex;

								td,
								th {
									flex: 1;
								}
							}
						}

						th {
							padding: 0;
							color: var(--text-03);
							text-transform: uppercase;
							border: 0;
						}

						td {
							padding: 0;

							cursor: pointer;
							border: 0;

							&.available.today {
								color: var(--interactive-03);
							}

							&.prev-month,
							&.next-month {
								color: var(--text-03);
							}

							&.disabled {
								color: var(--text-05);
								cursor: not-allowed;
								background-color: var(--ui-01);
							}
						}

						&.el-year-table,
						&.el-month-table {
							tr {
								padding: 0.8rem 0;
							}

							td {
								margin: 0 0.8em;
								border-radius: var(--field-border-radius);

								a {
									display: flex;
									align-items: center;
									justify-content: center;
									text-transform: uppercase;

									&:hover {
										color: var(--interactive-01);
									}
								}

								&.current {
									background-color: var(--interactive-03);

									&:hover {
										background-color: var(--interactive-01);
									}

									a {
										color: var(--text-04);
									}
								}

								&.today {
									border: 1px solid var(--link-04);

									// a {
									// 	color: var(--link-04);
									// }
								}
							}
						}

						&.el-date-table {
							tr:first-of-type,
							tr:last-of-type {
								border-bottom: 1px solid var(--ui-02);
							}

							td,
							th {
								padding: 0.4rem 0;
							}

							th {
								font-weight: bold;
							}

							td {
								display: flex;
								align-items: center;
								justify-content: center;

								> div {
									display: flex;
									align-items: center;
									justify-content: center;
									width: $td-diameter;
									height: $td-diameter;
									border-radius: 50%;
								}

								&:not(.disabled) {
									@supports (
										clip-path: circle(calc(#{$td-diameter/2} + 2px) at center)
									) {
										clip-path: circle(calc(#{$td-diameter/2} + 2px) at center);
									}

									&:hover {
										background-color: var(--interactive-02-hover);
										transition: background-color var(--transition-short);
									}
								}

								&.available {
									&:hover {
										font-weight: bold;
										color: var(--link-03);
										transition: font-weight ease var(--transition-short);
									}

									&.today,
									&.current {
										> div {
											border: 1px solid var(--link-04);
										}
										&:hover {
											> div {
												border: 2px solid var(--link-03);
												transition: border ease var(--transition-short);
											}
										}
									}

									&.current {
										> div {
											background-color: var(--interactive-03);

											&:hover {
												background-color: var(--interactive-01);
											}

											> span {
												font-weight: bold;
												color: var(--interactive-02);
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

.el-date-range-picker {
	.el-picker-panel__body {
		display: flex;

		.el-date-range-picker__header {
			position: relative;

			div {
				position: absolute;
				left: 1.2rem;

				-webkit-order: 1;
				order: 1;
				text-transform: uppercase;
			}

			button.el-icon-d-arrow-left,
			button.el-icon-arrow-right {
				-webkit-order: 2;
				order: 2;
			}

			button.el-icon-arrow-left,
			button.el-icon-d-arrow-right {
				-webkit-order: 3;
				order: 3;
			}
		}
	}
}
